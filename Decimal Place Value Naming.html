<!DOCTYPE html>
<!-- saved from url=(0100)file:///C:/Users/pell/OneDrive%20-%20Roseville%20College/Downloads/decimal-place-value-naming_2.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decimal Place Value Naming</title>
    <link href="./Decimal Place Value Naming_files/css2" rel="stylesheet">
    <style>
        :root {
            --primary-accent: #4ECDC4;
            --bg-cream: #FFF8F0;
            --text-dark: #2D3436;
            --text-light: #636E72;
            --card-shadow: 0 8px 32px rgba(0,0,0,0.12);
            --level1-color: #4ECDC4;
            --level2-color: #FF6B6B;
            --level3-color: #9B5DE5;
            --level4-color: #F7B731;
            --level5-color: #26de81;
            --correct-color: #27AE60;
            --incorrect-color: #E74C3C;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            font-family: 'Fredoka', sans-serif;
            background: transparent;
            min-height: 100%;
            overflow-x: hidden;
        }

        .wrapper {
            background: var(--bg-cream);
            min-height: 100vh;
            padding-bottom: 2rem;
        }

        .bg-shapes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }

        .bg-shape { position: absolute; border-radius: 50%; opacity: 0.1; }
        .bg-shape-1 { width: 250px; height: 250px; background: var(--primary-accent); top: -80px; right: -50px; }
        .bg-shape-2 { width: 180px; height: 180px; background: var(--level2-color); bottom: 10%; left: -50px; }
        .bg-shape-3 { width: 120px; height: 120px; background: var(--level3-color); top: 50%; right: 5%; }

        .container {
            position: relative; z-index: 1;
            max-width: 960px; margin: 0 auto; padding: 1.5rem;
        }

        .page { display: none; animation: fadeIn 0.4s ease-out; }
        .page.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* â”€â”€â”€ LANDING PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .landing-header { text-align: center; margin-bottom: 2rem; }
        .landing-header h1 { font-size: 2.4rem; font-weight: 700; color: var(--text-dark); margin-bottom: 0.3rem; letter-spacing: -0.5px; }
        .landing-header h1 span { color: var(--primary-accent); }
        .landing-header .subtitle { font-size: 1.1rem; color: var(--text-light); font-weight: 500; }


        /* â”€â”€â”€ LEVEL SELECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .level-section-title { font-size: 1.15rem; margin-bottom: 1rem; color: var(--text-dark); }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
        }

        .level-btn {
            background: white;
            border: none;
            border-radius: 16px;
            padding: 1.25rem;
            cursor: pointer;
            box-shadow: var(--card-shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .level-btn::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 5px;
        }

        .level-btn.level-1::before { background: var(--level1-color); }
        .level-btn.level-2::before { background: var(--level2-color); }
        .level-btn.level-3::before { background: var(--level3-color); }
        .level-btn.level-4::before { background: var(--level4-color); }
        .level-btn.level-5::before { background: var(--level5-color); }

        .level-btn:hover { transform: translateY(-3px); box-shadow: 0 12px 40px rgba(0,0,0,0.15); }
        .level-btn h3 { font-size: 1.05rem; color: var(--text-dark); margin-bottom: 0.3rem; }
        .level-btn p { font-size: 0.85rem; color: var(--text-light); line-height: 1.3; }

        .level-meta {
            display: flex;
            gap: 0.75rem;
            margin-top: 0.5rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-light);
        }

        /* â”€â”€â”€ QUESTION PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .back-btn {
            background: white;
            border: 2px solid var(--text-light);
            color: var(--text-dark);
            padding: 0.6rem 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            transition: all 0.2s;
        }

        .back-btn:hover { transform: translateY(-2px); border-color: var(--text-dark); }

        .home-btn {
            background: var(--primary-accent);
            border: 2px solid var(--primary-accent);
            border-radius: 10px;
            padding: 0.6rem 1.2rem;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .home-btn:hover { background: #3db8b0; border-color: #3db8b0; transform: translateY(-2px); }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .question-progress {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* â”€â”€â”€ PROGRESS TRACKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .progress-tracker {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
            margin-bottom: 1.5rem;
        }

        .progress-dot {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #E0E0E0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            color: white;
            transition: all 0.3s;
        }

        .progress-dot.current { background: #2196F3; box-shadow: 0 0 0 3px rgba(33,150,243,0.3); }
        .progress-dot.correct { background: var(--correct-color); }
        .progress-dot.incorrect { background: var(--incorrect-color); }
        .progress-dot.partial { background: #F7B731; }

        /* â”€â”€â”€ QUESTION CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .question-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--card-shadow);
            margin-bottom: 1.5rem;
            border-top: 5px solid var(--primary-accent);
        }

        .question-card.level-1 { border-top-color: var(--level1-color); }
        .question-card.level-2 { border-top-color: var(--level2-color); }
        .question-card.level-3 { border-top-color: var(--level3-color); }
        .question-card.level-4 { border-top-color: var(--level4-color); }
        .question-card.level-5 { border-top-color: var(--level5-color); }

        .question-type-badge {
            display: inline-block;
            padding: 0.2rem 0.7rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
            background: #E3F2FD;
            color: #1565C0;
        }

        .question-type-badge.type-written { background: #F3E5F5; color: #6A1B9A; }
        .question-type-badge.type-convert { background: #E8F5E9; color: #2E7D32; }

        .question-text {
            font-size: 1.2rem;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .decimal-display {
            font-family: 'Space Mono', monospace;
            font-size: 2.4rem;
            font-weight: 700;
            color: var(--text-dark);
            text-align: center;
            padding: 1rem;
            background: #F8F9FA;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            letter-spacing: 0.05em;
        }

        /* â”€â”€â”€ MULTIPLE CHOICE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .choices-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .choice-btn {
            background: white;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            padding: 0.85rem 1rem;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            font-size: 1rem;
            color: var(--text-dark);
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .choice-btn .choice-letter {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #F0F0F0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            flex-shrink: 0;
            transition: all 0.2s;
        }

        .choice-btn:hover:not(:disabled) { border-color: var(--primary-accent); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .choice-btn:hover:not(:disabled) .choice-letter { background: var(--primary-accent); color: white; }

        .choice-btn.selected { border-color: var(--primary-accent); background: #E0F7F6; }
        .choice-btn.selected .choice-letter { background: var(--primary-accent); color: white; }

        .choice-btn.correct-choice { border-color: var(--correct-color); background: linear-gradient(135deg, #E8F5E9, #C8E6C9); }
        .choice-btn.correct-choice .choice-letter { background: var(--correct-color); color: white; }

        .choice-btn.wrong-choice { border-color: var(--incorrect-color); background: linear-gradient(135deg, #FFEBEE, #FFCDD2); }
        .choice-btn.wrong-choice .choice-letter { background: var(--incorrect-color); color: white; }

        .choice-btn:disabled { cursor: default; }

        /* â”€â”€â”€ TYPE ANSWER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .answer-section {
            background: #F8F9FA;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .answer-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .answer-input {
            width: 100%;
            padding: 0.85rem;
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            transition: all 0.2s;
            background: white;
        }

        .answer-input:focus { outline: none; border-color: var(--primary-accent); box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1); }

        .answer-input.correct { border-color: var(--correct-color); background: linear-gradient(135deg, #E8F5E9, #C8E6C9); }
        .answer-input.incorrect { border-color: var(--incorrect-color); background: linear-gradient(135deg, #FFEBEE, #FFCDD2); }

        .answer-hint {
            font-size: 0.85rem;
            color: #6A1B9A;
            background: #F3E5F5;
            border-left: 3px solid #9B5DE5;
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }

        /* â”€â”€â”€ REMINDER BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .reminder-box {
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border-radius: 12px;
            padding: 0.75rem 1rem;
            margin-bottom: 1.25rem;
            border-left: 4px solid #F7B731;
            font-size: 0.9rem;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reminder-box::before { content: "ğŸ’¡"; font-size: 1.1rem; }

        /* â”€â”€â”€ FEEDBACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .feedback-box {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            display: none;
            border-left: 4px solid #2196F3;
        }

        .feedback-box.visible { display: block; animation: slideDown 0.3s ease-out; }

        .feedback-box.correct { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-left-color: var(--correct-color); }
        .feedback-box.incorrect { background: linear-gradient(135deg, #FFEBEE, #FFCDD2); border-left-color: var(--incorrect-color); }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-box h4 {
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .feedback-box.correct h4::before { content: "âœ“"; color: var(--correct-color); font-size: 1.2rem; }
        .feedback-box.incorrect h4::before { content: "âœ—"; color: var(--incorrect-color); font-size: 1.2rem; }

        .feedback-box p {
            color: var(--text-dark);
            font-size: 0.9rem;
            font-family: 'Space Mono', monospace;
        }

        /* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .button-row {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.85rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Fredoka', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-primary { background: var(--primary-accent); color: white; }
        .btn-primary:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(78,205,196,0.3); }

        .btn-secondary { background: white; color: var(--text-dark); border: 2px solid var(--text-light); }
        .btn-secondary:hover:not(:disabled) { transform: translateY(-2px); border-color: var(--text-dark); }

        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* â”€â”€â”€ COMPLETION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .completion-page { text-align: center; padding: 2rem 0; }
        .completion-icon { font-size: 4rem; margin-bottom: 1rem; }
        .completion-page h2 { font-size: 1.8rem; color: var(--text-dark); margin-bottom: 1rem; }
        .completion-page p { font-size: 1.1rem; color: var(--text-light); margin-bottom: 2rem; }

        .score-display {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .score-number { font-size: 3rem; font-weight: 700; color: var(--primary-accent); font-family: 'Space Mono', monospace; }
        .score-label { font-size: 0.9rem; color: var(--text-light); margin-top: 0.3rem; }


        /* â”€â”€â”€ REVISION ROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .revision-banner {
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border-radius: 12px;
            padding: 0.75rem 1rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #F7B731;
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        /* responsive */
        @media (max-width: 600px) {
            .choices-grid { grid-template-columns: 1fr; }
            .landing-header h1 { font-size: 1.8rem; }
            .decimal-display { font-size: 1.8rem; }
            .pv-chart { min-width: 520px; }
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="bg-shapes">
        <div class="bg-shape bg-shape-1"></div>
        <div class="bg-shape bg-shape-2"></div>
        <div class="bg-shape bg-shape-3"></div>
    </div>

    <div class="container">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!--  LANDING PAGE                               -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="landing-page" class="page active">
            <div class="landing-header">
                <h1>Decimal <span>Place Value</span> Naming</h1>
                <p class="subtitle">Name the value of each decimal â€” from tenths to hundred-thousandths!</p>
            </div>


            <p class="level-section-title">Choose your level:</p>
            <div class="level-grid">
                <button class="level-btn level-1" onclick="startLevel(0)">
                    <h3>ğŸŸ¢ Level 1 â€” Tenths</h3>
                    <p>Numbers like 0.4, 0.7, 0.1</p>
                    <div class="level-meta"><span>15 questions</span><span>Multiple choice + typed</span></div>
                </button>
                <button class="level-btn level-2" onclick="startLevel(1)">
                    <h3>ğŸ”´ Level 2 â€” Hundredths</h3>
                    <p>Numbers like 0.25, 0.04, 0.89</p>
                    <div class="level-meta"><span>15 questions</span><span>Multiple choice + typed</span></div>
                </button>
                <button class="level-btn level-3" onclick="startLevel(2)">
                    <h3>ğŸŸ£ Level 3 â€” Thousandths</h3>
                    <p>Numbers like 0.125, 4.008, 15.045</p>
                    <div class="level-meta"><span>15 questions</span><span>Multiple choice + typed</span></div>
                </button>
                <button class="level-btn level-4" onclick="startLevel(3)">
                    <h3>ğŸŸ¡ Level 4 â€” Ten-Thousandths</h3>
                    <p>Numbers like 0.0123, 2.0005, 12.0042</p>
                    <div class="level-meta"><span>15 questions</span><span>Multiple choice + typed</span></div>
                </button>
                <button class="level-btn level-5" onclick="startLevel(4)">
                    <h3>ğŸŸ¢ Level 5 â€” Hundred-Thousandths</h3>
                    <p>Numbers like 0.00025, 1.12345</p>
                    <div class="level-meta"><span>15 questions</span><span>Multiple choice + typed</span></div>
                </button>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!--  QUESTION PAGE                              -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="question-page" class="page">
            <div class="question-header">
                <button class="back-btn" onclick="showPage(&#39;landing-page&#39;)">â† Back to Levels</button>
                <a href="file:///C:/Users/pell/OneDrive%20-%20Roseville%20College/Downloads/index.html" class="home-btn">ğŸ  Home</a>
            </div>

            <div id="revision-banner" class="revision-banner" style="display:none">
                ğŸ”„ <strong>Revision Round!</strong> Let's go back over the ones you missed.
            </div>

            <div class="progress-tracker" id="progress-tracker"></div>

            <div id="question-card" class="question-card">
                <div class="reminder-box" id="reminder-box"></div>

                <div class="question-progress" id="question-counter"></div>
                <div id="question-type-badge" class="question-type-badge"></div>
                <div class="decimal-display" id="decimal-display"></div>
                <div class="question-text" id="question-text"></div>

                <!-- Multiple choice -->
                <div id="choices-grid" class="choices-grid"></div>

                <!-- Typed answer -->
                <div id="answer-section" class="answer-section" style="display:none">
                    <div class="answer-label" id="answer-label">Your answer:</div>
                    <input type="text" class="answer-input" id="answer-input" placeholder="Type your answer hereâ€¦" autocomplete="off">
                    <div class="answer-hint" id="answer-hint"></div>
                </div>

                <div class="feedback-box" id="feedback-box">
                    <h4 id="feedback-heading">Result</h4>
                    <p id="feedback-text"></p>
                </div>

                <div class="button-row">
                    <button class="btn btn-secondary" id="check-btn" onclick="checkAnswer()">Check Answer</button>
                    <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled="">Next â†’</button>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!--  COMPLETION PAGE                            -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="completion-page" class="page">
            <div class="completion-page">
                <div class="completion-icon">ğŸ‰</div>
                <h2 id="completion-message">Well done!</h2>
                <div class="score-display">
                    <div class="score-number" id="final-score">â€”</div>
                    <div class="score-label" id="score-label">Correct Answers</div>
                </div>
                <div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;">
                    <button class="back-btn" onclick="showPage(&#39;landing-page&#39;)" style="margin-bottom:0">Try Another Level</button>
                    <a href="file:///C:/Users/pell/OneDrive%20-%20Roseville%20College/Downloads/index.html" class="home-btn">ğŸ  Home</a>
                </div>
            </div>
        </div>

    </div><!-- /container -->
</div><!-- /wrapper -->

<script>

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  QUESTION DATA
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const levels = [
    // Level 1: Tenths (15 Qs)
    {
        name: 'Level 1 â€” Tenths',
        questions: [
            { type:'mc', number:'0.4', text:'What is the value of 0.4?', choices:['four hundredths','four tenths','forty'], answer:1 },
            { type:'mc', number:'0.1', text:'What is the value of 0.1?', choices:['one tenth','ten','one hundredth'], answer:0 },
            { type:'mc', number:'0.8', text:'What is the value of 0.8?', choices:['eight units','eight tenths','eighty'], answer:1 },
            { type:'mc', number:'0.5', text:'What is the value of 0.5?', choices:['five tenths','fifty','five thousandths'], answer:0 },
            { type:'mc', number:'0.2', text:'What is the value of 0.2?', choices:['twenty','two hundredths','two tenths'], answer:2 },
            { type:'mc', number:'0.9', text:'What is the value of 0.9?', choices:['nine tenths','ninety','nine thousandths'], answer:0 },
            { type:'mc', number:'0.3', text:'What is the value of 0.3?', choices:['thirty','three tenths','three hundredths'], answer:1 },
            { type:'mc', number:'0.6', text:'What is the value of 0.6?', choices:['six tenths','sixty','six hundredths'], answer:0 },
            { type:'mc', number:'0.7', text:'What is the value of 0.7?', choices:['seventy','seven tenths','seven'], answer:1 },
            { type:'mc', number:'0.4', text:'What is the value of 0.4?', choices:['four tenths','four','forty'], answer:0 },
            { type:'mc', number:'0.1', text:'What is the value of 0.1?', choices:['one','one tenth','ten'], answer:1 },
            { type:'mc', number:'0.5', text:'What is the value of 0.5?', choices:['fifty','five tenths','five hundredths'], answer:1 },
            { type:'typed', number:'0.8', text:'Write the value of 0.8 in words:', answer:'eight tenths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.2', text:'Write the value of 0.2 in words:', answer:'two tenths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.6', text:'Write the value of 0.6 in words:', answer:'six tenths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' }
        ]
    },
    // Level 2: Hundredths (15 Qs)
    {
        name: 'Level 2 â€” Hundredths',
        questions: [
            { type:'mc', number:'0.25', text:'What is the value of 0.25?', choices:['25 tenths','25 hundredths','25 units'], answer:1 },
            { type:'mc', number:'0.04', text:'What is the value of 0.04?', choices:['4 tenths','4 units','4 hundredths'], answer:2 },
            { type:'mc', number:'0.89', text:'What is the value of 0.89?', choices:['89 hundredths','89 tenths','89 thousandths'], answer:0 },
            { type:'mc', number:'0.11', text:'What is the value of 0.11?', choices:['11 tenths','11 hundredths','11'], answer:1 },
            { type:'mc', number:'0.50', text:'What is the value of 0.50?', choices:['50 tenths','50 units','50 hundredths'], answer:2 },
            { type:'mc', number:'0.07', text:'What is the value of 0.07?', choices:['7 hundredths','7 tenths','70'], answer:0 },
            { type:'mc', number:'0.15', text:'What is the value of 0.15?', choices:['15 thousandths','15 hundredths','15 units'], answer:1 },
            { type:'mc', number:'0.33', text:'What is the value of 0.33?', choices:['33 tenths','33 hundredths','33'], answer:1 },
            { type:'mc', number:'0.01', text:'What is the value of 0.01?', choices:['1 tenth','1 unit','1 hundredth'], answer:2 },
            { type:'mc', number:'0.72', text:'What is the value of 0.72?', choices:['72 hundredths','72 thousandths','72 tenths'], answer:0 },
            { type:'typed', number:'0.45', text:'Write the value of 0.45 in words:', answer:'forty-five hundredths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.09', text:'Write the value of 0.09 in words:', answer:'nine hundredths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.18', text:'Write the value of 0.18 in words:', answer:'eighteen hundredths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'twelve hundredths', text:'Give the decimal number for twelve hundredths:', answer:'0.12', hint:'Write as a decimal e.g. 0.25', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'six hundredths', text:'Give the decimal number for six hundredths:', answer:'0.06', hint:'Write as a decimal e.g. 0.07', answerLabel:'Write as a decimal:' }
        ]
    },
    // Level 3: Thousandths (15 Qs)
    {
        name: 'Level 3 â€” Thousandths',
        questions: [
            { type:'mc', number:'0.125', text:'What is the value of 0.125?', choices:['125 hundredths','125 thousandths','125 tenths'], answer:1 },
            { type:'mc', number:'4.008', text:'What is the value of 4.008?', choices:['4 and 8 thousandths','4 and 8 hundredths','4008 thousandths'], answer:0 },
            { type:'mc', number:'0.012', text:'What is the value of 0.012?', choices:['12 hundredths','12 tenths','12 thousandths'], answer:2 },
            { type:'mc', number:'15.045', text:'What is the value of 15.045?', choices:['15 and 45 thousandths','15 and 45 hundredths'], answer:0 },
            { type:'mc', number:'0.999', text:'What is the value of 0.999?', choices:['999 thousandths','999 hundredths','999 ten-thousandths'], answer:0 },
            { type:'mc', number:'2.102', text:'What is the value of 2.102?', choices:['2 and 102 thousandths','2 and 102 hundredths'], answer:0 },
            { type:'mc', number:'0.001', text:'What is the value of 0.001?', choices:['1 hundredth','1 thousandth','1 tenth'], answer:1 },
            { type:'mc', number:'7.070', text:'What is the value of 7.070?', choices:['7 and 70 thousandths','7 and 70 hundredths'], answer:0 },
            { type:'typed', number:'0.342', text:'Write the value of 0.342 in words:', answer:'three hundred forty-two thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'1.005', text:'Write the value of 1.005 in words:', answer:'one and five thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.019', text:'Write the value of 0.019 in words:', answer:'nineteen thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'10.225', text:'Write the value of 10.225 in words:', answer:'ten and two hundred twenty-five thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'six hundred twenty-one thousandths', text:'Give the decimal for six hundred twenty-one thousandths:', answer:'0.621', hint:'Write as a decimal e.g. 0.125', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'four and nine thousandths', text:'Give the decimal for four and nine thousandths:', answer:'4.009', hint:'Write as a decimal e.g. 4.008', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'eighty thousandths', text:'Give the decimal for eighty thousandths:', answer:'0.080', hint:'Write as a decimal e.g. 0.070', answerLabel:'Write as a decimal:' }
        ]
    },
    // Level 4: Ten-Thousandths (15 Qs)
    {
        name: 'Level 4 â€” Ten-Thousandths',
        questions: [
            { type:'mc', number:'0.0123', text:'What is the value of 0.0123?', choices:['123 thousandths','123 ten-thousandths'], answer:1 },
            { type:'mc', number:'2.0005', text:'What is the value of 2.0005?', choices:['2 and 5 thousandths','2 and 5 ten-thousandths'], answer:1 },
            { type:'mc', number:'0.9876', text:'What is the value of 0.9876?', choices:['9,876 ten-thousandths','9,876 hundred-thousandths'], answer:0 },
            { type:'mc', number:'1.1011', text:'What is the value of 1.1011?', choices:['1 and 1,011 ten-thousandths','1 and 1,011 thousandths'], answer:0 },
            { type:'mc', number:'0.0001', text:'What is the value of 0.0001?', choices:['1 thousandth','1 ten-thousandth'], answer:1 },
            { type:'mc', number:'12.0042', text:'What is the value of 12.0042?', choices:['12 and 42 hundredths','12 and 42 ten-thousandths'], answer:1 },
            { type:'mc', number:'0.5555', text:'What is the value of 0.5555?', choices:['5,555 ten-thousandths','5,555 tenths'], answer:0 },
            { type:'typed', number:'0.0456', text:'Write the value of 0.0456 in words:', answer:'four hundred fifty-six ten-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'3.1234', text:'Write the value of 3.1234 in words:', answer:'three and one thousand two hundred thirty-four ten-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.0009', text:'Write the value of 0.0009 in words:', answer:'nine ten-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'25.0015', text:'Write the value of 25.0015 in words:', answer:'twenty-five and fifteen ten-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'seventy-two ten-thousandths', text:'Give the decimal for seventy-two ten-thousandths:', answer:'0.0072', hint:'Write as a decimal e.g. 0.0123', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'one and four hundred ten-thousandths', text:'Give the decimal for one and four hundred ten-thousandths:', answer:'1.0400', hint:'Write as a decimal e.g. 2.0005', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'five thousand, two hundred ten-thousandths', text:'Give the decimal for five thousand, two hundred ten-thousandths:', answer:'0.5200', hint:'Write as a decimal e.g. 0.5555', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'nine ten-thousandths', text:'Give the decimal for nine ten-thousandths:', answer:'0.0009', hint:'Write as a decimal e.g. 0.0001', answerLabel:'Write as a decimal:' }
        ]
    },
    // Level 5: Hundred-Thousandths (15 Qs)
    {
        name: 'Level 5 â€” Hundred-Thousandths',
        questions: [
            { type:'mc', number:'0.00025', text:'What is the value of 0.00025?', choices:['25 hundred-thousandths','25 ten-thousandths'], answer:0 },
            { type:'mc', number:'1.12345', text:'What is the value of 1.12345?', choices:['1 and 12,345 hundred-thousandths','1 and 12,345 thousandths'], answer:0 },
            { type:'mc', number:'0.00001', text:'What is the value of 0.00001?', choices:['1 millionth','1 hundred-thousandth'], answer:1 },
            { type:'mc', number:'9.00900', text:'What is the value of 9.00900?', choices:['9 and 900 hundred-thousandths','9 and 900 thousandths'], answer:0 },
            { type:'mc', number:'0.88888', text:'What is the value of 0.88888?', choices:['88,888 hundred-thousandths','88,888 ten-thousandths'], answer:0 },
            { type:'mc', number:'100.00002', text:'What is the value of 100.00002?', choices:['100 and 2 hundred-thousandths','100 and 2 tenths'], answer:0 },
            { type:'mc', number:'0.10001', text:'What is the value of 0.10001?', choices:['10,001 ten-thousandths','10,001 hundred-thousandths'], answer:1 },
            { type:'typed', number:'0.01234', text:'Write the value of 0.01234 in words:', answer:'one thousand two hundred thirty-four hundred-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'5.00005', text:'Write the value of 5.00005 in words:', answer:'five and five hundred-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'0.11111', text:'Write the value of 0.11111 in words:', answer:'eleven thousand one hundred eleven hundred-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'12.54321', text:'Write the value of 12.54321 in words:', answer:'twelve and fifty-four thousand three hundred twenty-one hundred-thousandths', hint:'Use a hyphen where needed â€” e.g. 0.20 â†’ "twenty-hundredths"', answerLabel:'Write in words:' },
            { type:'typed', number:'three hundred-thousandths', text:'Give the decimal for three hundred-thousandths:', answer:'0.00003', hint:'Write as a decimal e.g. 0.00025', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'ten and fifteen hundred-thousandths', text:'Give the decimal for ten and fifteen hundred-thousandths:', answer:'10.00015', hint:'Write as a decimal e.g. 9.00900', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'eighty-two thousand, one hundred hundred-thousandths', text:'Give the decimal for eighty-two thousand, one hundred hundred-thousandths:', answer:'0.82100', hint:'Write as a decimal e.g. 0.88888', answerLabel:'Write as a decimal:' },
            { type:'typed', number:'nine hundred-thousandths', text:'Give the decimal for nine hundred-thousandths:', answer:'0.00009', hint:'Write as a decimal e.g. 0.00001', answerLabel:'Write as a decimal:' }
        ]
    }
];

const reminderTexts = [
    'Look at the very last digit to name the decimal\'s value!',
    'Look at the very last digit to name the decimal\'s value!',
    'Look at the very last digit â€” and include whole number parts if there\'s a digit before the decimal!',
    'Look at the very last digit â€” ten-thousandths go four places after the decimal point.',
    'Look at the very last digit â€” hundred-thousandths go five places after the decimal point.'
];

const levelColors = ['level-1','level-2','level-3','level-4','level-5'];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  STATE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentLevel = 0;
let currentQuestion = 0;
let score = 0;
let questionStatus = [];
let initialQuestionResult = [];
let hasChecked = false;
let isRevisionRound = false;
let revisionIndices = [];
let selectedChoiceIndex = null;

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  PAGE NAVIGATION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo(0, 0);
}

function startLevel(levelIndex) {
    currentLevel = levelIndex;
    currentQuestion = 0;
    score = 0;
    isRevisionRound = false;
    revisionIndices = [];
    const n = levels[levelIndex].questions.length;
    questionStatus = Array(n).fill(null);
    initialQuestionResult = Array(n).fill(null);
    createProgressTracker();
    loadQuestion();
    showPage('question-page');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  PROGRESS TRACKER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function createProgressTracker() {
    const tracker = document.getElementById('progress-tracker');
    tracker.innerHTML = '';
    const total = isRevisionRound ? revisionIndices.length : levels[currentLevel].questions.length;
    for (let i = 0; i < total; i++) {
        const dot = document.createElement('div');
        dot.className = 'progress-dot';
        dot.textContent = i + 1;
        dot.id = `dot-${i}`;
        tracker.appendChild(dot);
    }
}

function updateProgressTracker() {
    const total = isRevisionRound ? revisionIndices.length : levels[currentLevel].questions.length;
    for (let i = 0; i < total; i++) {
        const dot = document.getElementById(`dot-${i}`);
        if (!dot) continue;
        const actualIdx = isRevisionRound ? revisionIndices[i] : i;
        dot.className = 'progress-dot';
        if (i === currentQuestion) dot.classList.add('current');
        if (questionStatus[actualIdx] === 'correct') dot.classList.add('correct');
        else if (questionStatus[actualIdx] === 'incorrect') dot.classList.add('incorrect');
    }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  LOAD QUESTION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadQuestion() {
    hasChecked = false;
    selectedChoiceIndex = null;

    const actualIndex = isRevisionRound ? revisionIndices[currentQuestion] : currentQuestion;
    const q = levels[currentLevel].questions[actualIndex];
    const total = isRevisionRound ? revisionIndices.length : levels[currentLevel].questions.length;

    // Revision banner
    document.getElementById('revision-banner').style.display = isRevisionRound ? 'block' : 'none';

    // Card level colour
    const card = document.getElementById('question-card');
    card.className = `question-card ${levelColors[currentLevel]}`;

    // Counter
    document.getElementById('question-counter').textContent = `Question ${currentQuestion + 1} of ${total}`;

    // Reminder
    document.getElementById('reminder-box').textContent = reminderTexts[currentLevel];


    // Badge
    const badge = document.getElementById('question-type-badge');
    if (q.type === 'mc') {
        badge.textContent = 'Multiple Choice';
        badge.className = 'question-type-badge';
    } else {
        badge.textContent = q.answerLabel && q.answerLabel.includes('decimal') ? 'Convert to Decimal' : 'Write in Words';
        badge.className = 'question-type-badge ' + (q.answerLabel && q.answerLabel.includes('decimal') ? 'type-convert' : 'type-written');
    }

    // Decimal display
    document.getElementById('decimal-display').textContent = q.number;

    // Question text
    document.getElementById('question-text').textContent = q.text;

    // Reset feedback
    const fb = document.getElementById('feedback-box');
    fb.className = 'feedback-box';
    fb.style.display = '';

    // Show/hide sections
    const choicesGrid = document.getElementById('choices-grid');
    const answerSection = document.getElementById('answer-section');

    if (q.type === 'mc') {
        choicesGrid.style.display = 'grid';
        answerSection.style.display = 'none';
        renderChoices(q);
    } else {
        choicesGrid.style.display = 'none';
        answerSection.style.display = 'block';
        const input = document.getElementById('answer-input');
        input.value = '';
        input.className = 'answer-input';
        input.disabled = false;
        input.placeholder = 'Type your answer hereâ€¦';
        document.getElementById('answer-label').textContent = q.answerLabel || 'Your answer:';
        document.getElementById('answer-hint').textContent = q.hint || '';
        setTimeout(() => input.focus(), 100);
    }

    // Buttons
    const checkBtn = document.getElementById('check-btn');
    const nextBtn = document.getElementById('next-btn');
    checkBtn.disabled = (q.type === 'mc'); // for MC, check triggers on click
    nextBtn.disabled = true;

    if (q.type === 'mc') {
        checkBtn.textContent = 'Select an answer';
    } else {
        checkBtn.textContent = 'Check Answer';
        checkBtn.disabled = false;
    }

    updateProgressTracker();
}

function renderChoices(q) {
    const grid = document.getElementById('choices-grid');
    grid.innerHTML = '';
    const letters = ['A', 'B', 'C', 'D'];
    q.choices.forEach((choice, i) => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.innerHTML = `<span class="choice-letter">${letters[i]}</span> ${choice}`;
        btn.onclick = () => selectChoice(i, q);
        grid.appendChild(btn);
    });
}

function selectChoice(index, q) {
    if (hasChecked) return;
    selectedChoiceIndex = index;
    const btns = document.querySelectorAll('.choice-btn');
    btns.forEach((b, i) => {
        b.className = 'choice-btn' + (i === index ? ' selected' : '');
    });
    // Auto-check on selection
    checkMCAnswer(index, q);
}

function checkMCAnswer(index, q) {
    if (hasChecked) return;
    hasChecked = true;

    const actualIndex = isRevisionRound ? revisionIndices[currentQuestion] : currentQuestion;
    const correct = index === q.answer;

    const btns = document.querySelectorAll('.choice-btn');
    btns.forEach((b, i) => {
        b.disabled = true;
        if (i === q.answer) b.classList.add('correct-choice');
        else if (i === index && !correct) b.classList.add('wrong-choice');
    });

    const fb = document.getElementById('feedback-box');
    const fh = document.getElementById('feedback-heading');
    const ft = document.getElementById('feedback-text');
    fb.className = 'feedback-box visible ' + (correct ? 'correct' : 'incorrect');
    fh.textContent = correct ? 'Correct! âœ“' : 'Not quiteâ€¦';
    ft.textContent = correct
        ? `Great work! The answer is "${q.choices[q.answer]}".`
        : `The correct answer is "${q.choices[q.answer]}".`;

    if (correct) {
        score++;
        questionStatus[actualIndex] = 'correct';
    } else {
        questionStatus[actualIndex] = 'incorrect';
    }
    if (!isRevisionRound && initialQuestionResult[actualIndex] === null) {
        initialQuestionResult[actualIndex] = questionStatus[actualIndex];
    }

    document.getElementById('check-btn').disabled = true;
    document.getElementById('check-btn').textContent = correct ? 'âœ“ Correct' : 'âœ— Incorrect';
    document.getElementById('next-btn').disabled = false;
    updateProgressTracker();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  CHECK TYPED ANSWER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function normalise(str) {
    return str
        .toLowerCase()
        .trim()
        .replace(/\s+/g, ' ')
        .replace(/,/g, '')
        .replace(/â€“/g, '-')
        .replace(/âˆ’/g, '-');
}

function checkAnswer() {
    if (hasChecked) return;

    const actualIndex = isRevisionRound ? revisionIndices[currentQuestion] : currentQuestion;
    const q = levels[currentLevel].questions[actualIndex];

    if (q.type === 'mc') return;

    const input = document.getElementById('answer-input');
    const userAnswer = normalise(input.value);
    const correctAnswer = normalise(q.answer);
    const correct = userAnswer === correctAnswer;

    hasChecked = true;
    input.className = 'answer-input ' + (correct ? 'correct' : 'incorrect');
    input.disabled = true;

    const fb = document.getElementById('feedback-box');
    const fh = document.getElementById('feedback-heading');
    const ft = document.getElementById('feedback-text');
    fb.className = 'feedback-box visible ' + (correct ? 'correct' : 'incorrect');
    fh.textContent = correct ? 'Correct! âœ“' : 'Not quiteâ€¦';
    ft.textContent = correct
        ? `Perfect! "${q.answer}" is right.`
        : `The correct answer is: "${q.answer}"`;

    if (correct) {
        score++;
        questionStatus[actualIndex] = 'correct';
    } else {
        questionStatus[actualIndex] = 'incorrect';
    }
    if (!isRevisionRound && initialQuestionResult[actualIndex] === null) {
        initialQuestionResult[actualIndex] = questionStatus[actualIndex];
    }

    document.getElementById('check-btn').disabled = true;
    document.getElementById('next-btn').disabled = false;
    updateProgressTracker();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  NEXT QUESTION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function nextQuestion() {
    currentQuestion++;
    const qs = levels[currentLevel].questions;

    if (isRevisionRound) {
        if (currentQuestion >= revisionIndices.length) {
            finishLevel();
        } else {
            loadQuestion();
        }
        return;
    }

    if (currentQuestion >= qs.length) {
        const incorrectIndices = qs.map((_, i) => i).filter(i => questionStatus[i] === 'incorrect');
        if (incorrectIndices.length === 0) {
            finishLevel();
        } else {
            startRevisionRound(incorrectIndices);
        }
    } else {
        loadQuestion();
    }
}

function startRevisionRound(incorrectIndices) {
    isRevisionRound = true;
    revisionIndices = incorrectIndices;
    currentQuestion = 0;
    createProgressTracker();
    loadQuestion();
}

function finishLevel() {
    const total = levels[currentLevel].questions.length;
    const finalScore = questionStatus.filter(s => s === 'correct').length;
    document.getElementById('completion-message').textContent =
        `Well done! You've completed ${levels[currentLevel].name}!`;
    document.getElementById('final-score').textContent = `${finalScore} / ${total}`;
    document.getElementById('score-label').textContent = 'Correct Answers';
    showPage('completion-page');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  KEYBOARD ENTER SUPPORT
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', function () {

    document.addEventListener('keydown', function (e) {
        if (e.key !== 'Enter') return;
        const nextBtn = document.querySelector('.page.active #next-btn');
        const checkBtn = document.querySelector('.page.active #check-btn');
        if (nextBtn && !nextBtn.disabled) {
            e.preventDefault();
            nextBtn.click();
        } else if (checkBtn && !checkBtn.disabled) {
            e.preventDefault();
            checkBtn.click();
        }
    });
});
</script>


</body></html>